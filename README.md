# ğŸ“ Ğ›Ğ¸Ğ³Ğ° Ğ½Ğ°ÑÑ‚Ğ¾Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞ½Ğ½Ğ¸ÑĞ° â€” Telegram Mini App

ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ğ³Ğ¾Ğ¹ Ğ½Ğ°ÑÑ‚Ğ¾Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞ½Ğ½Ğ¸ÑĞ°: Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³, Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ñ‹, Ğ²Ğ²Ğ¾Ğ´ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹. Telegram Bot + Mini App (React) + Supabase.

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
tg_tennis_league_bot/
â”œâ”€â”€ bot/                  # Telegram-Ğ±Ğ¾Ñ‚ (Python, aiogram 3)
â”œâ”€â”€ frontend/             # Mini App (React + Vite + Tailwind)
â”œâ”€â”€ database/             # Ğ¡Ñ…ĞµĞ¼Ğ° Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ‘Ğ” (Supabase)
â”œâ”€â”€ scripts/              # Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· CSV Ğ¸ Ğ´Ñ€.
â”œâ”€â”€ .github/workflows/    # Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğ° Ğ½Ğ° GitHub Pages
â””â”€â”€ README.md
```

---

## 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ° Ğ² @BotFather

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ [@BotFather](https://t.me/BotFather) Ğ² Telegram.
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/newbot`, ÑƒĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¸Ğ¼Ñ Ğ¸ username Ğ±Ğ¾Ñ‚Ğ°.
3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ **Ñ‚Ğ¾ĞºĞµĞ½** (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, `123456:ABC-DEF...`). ĞĞ½ Ğ¿Ğ¾Ğ½Ğ°Ğ´Ğ¾Ğ±Ğ¸Ñ‚ÑÑ Ğ´Ğ»Ñ `BOT_TOKEN`.

---

## 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ² Supabase

1. Ğ—Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ½Ğ° [supabase.com](https://supabase.com) Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚.
2. Ğ’ **SQL Editor** Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ° **`database/schema.sql`** Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼.
3. Ğ•ÑĞ»Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚Ğµ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ¸Ğ· CSV Ñ `telegram_id = NULL`, Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ:
   - **`database/migrations/002_allow_null_telegram_id.sql`**
4. (ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾) Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ **`database/seed.sql`** Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….
5. Ğ’ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (**Settings â†’ API**) ÑĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ:
   - **Project URL** â†’ Ğ´Ğ»Ñ `SUPABASE_URL`
   - **anon public** â†’ Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğ° Ğ¸ Ğ±Ğ¾Ñ‚Ğ° (Ğ¸Ğ»Ğ¸ **service_role** Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ±Ğ¾Ñ‚Ğ°, ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ±ĞµĞ· RLS)

---

## 3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ .env Ñ„Ğ°Ğ¹Ğ»Ñ‹

### Ğ‘Ğ¾Ñ‚ (`bot/.env`)

Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `bot/.env.example` Ğ² `bot/.env` Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:

```env
BOT_TOKEN=Ğ²Ğ°Ñˆ_Ñ‚Ğ¾ĞºĞµĞ½_Ğ¾Ñ‚_BotFather
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_KEY=Ğ²Ğ°Ñˆ_anon_Ğ¸Ğ»Ğ¸_service_role_ĞºĞ»ÑÑ‡
ADMIN_TELEGRAM_ID=Ğ²Ğ°Ñˆ_telegram_id
WEBAPP_URL=https://yourusername.github.io/Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹/tennis-league/
```

- **ADMIN_TELEGRAM_ID** â€” Ğ²Ğ°Ñˆ Telegram ID (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ¸Ğ· [@userinfobot](https://t.me/userinfobot)), Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½-ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ¸ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ° Ğ¾ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ Ñ‚ÑƒÑ€Ğ°.
- **WEBAPP_URL** â€” URL Mini App Ğ¿Ğ¾ÑĞ»Ğµ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ğ½Ğ° GitHub Pages.

**Ğ¡Ğ°Ğ¼Ğ¾Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ /start Ğ±ĞµĞ· Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ² Supabase:** ĞµÑĞ»Ğ¸ Ğ²Ñ‹ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ `003_allow_insert_players.sql`, Ğ² `SUPABASE_KEY` Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ»ÑÑ‡ **service_role** (Supabase â†’ Settings â†’ API â†’ service_role secret). Ğ¢Ğ¾Ğ³Ğ´Ğ° RLS Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑÑ‚Ğ°Ğ²ĞºÑƒ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ `players`, Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ ÑĞ¼Ğ¾Ğ³ÑƒÑ‚ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğµ /start. ĞšĞ»ÑÑ‡ service_role Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² `bot/.env`, Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ĞµĞ³Ğ¾ Ğ²Ğ¾ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğµ.

### Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ (`frontend/.env`)

Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `frontend/.env.example` Ğ² `frontend/.env`:

```env
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=Ğ²Ğ°Ñˆ_anon_ĞºĞ»ÑÑ‡
```

---

## 4. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾

```bash
cd bot
pip install -r requirements.txt
python main.py
```

Ğ‘Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑÑ Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ long polling. ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² **23:55** Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ»Ğ¸ Ğ´ĞµĞ½ÑŒ Ğ¼ĞµÑÑÑ†Ğ°; ĞµÑĞ»Ğ¸ Ğ´Ğ° â€” Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚ÑƒÑ€ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞµĞ·Ğ¾Ğ½ Ñ Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹.

---

## 5. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ GitHub Pages Ğ´Ğ»Ñ frontend

1. Ğ’ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ½Ğ° GitHub: **Settings â†’ Pages**.
2. Ğ’ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ **Build and deployment** Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ **Source: GitHub Actions**.
3. Ğ’ **Settings â†’ Secrets and variables â†’ Actions** Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹:
   - **VITE_SUPABASE_URL** â€” Project URL Ğ¸Ğ· Supabase.
   - **VITE_SUPABASE_KEY** â€” anon public ĞºĞ»ÑÑ‡ Ğ¸Ğ· Supabase.
4. ĞŸĞ¾ÑĞ»Ğµ Ğ¿ÑƒÑˆĞ° Ğ² Ğ²ĞµÑ‚ĞºÑƒ **main** Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ğ² **frontend/** workflow ÑĞ¾Ğ±ĞµÑ€Ñ‘Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¸ Ğ·Ğ°Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ñ‚ ĞµĞ³Ğ¾ Ğ½Ğ° GitHub Pages.
5. URL Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ±ÑƒĞ´ĞµÑ‚: `https://<username>.github.io/<repo>/tennis-league/` (ĞµÑĞ»Ğ¸ Ğ² `vite.config.js` ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾ `base: '/tennis-league/'`).

Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ² ÑĞ±Ğ¾Ñ€ĞºĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ»ÑÑ `npm ci`, Ğ·Ğ°ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ **`frontend/package-lock.json`** (ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ `npm install` Ğ² ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğµ `frontend`).

---

## 6. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Mini App Ğ² @BotFather

1. Ğ’ [@BotFather](https://t.me/BotFather) Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°.
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ **/newapp** (Ğ¸Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Ğ¼ĞµĞ½Ñ: Bot Settings â†’ Menu Button).
3. Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ URL Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Mini App (Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ **WEBAPP_URL**, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ `https://yourusername.github.io/your-repo/tennis-league/`).
4. ĞŸÑ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ¶Ğ¸Ñ‚Ğµ Mini App Ğº ĞºĞ½Ğ¾Ğ¿ĞºĞµ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ñ‚Ğ°.

---

## 7. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚Ğ° Ğ½Ğ° Railway

1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ [Railway CLI](https://docs.railway.app/develop/cli) (ĞµÑĞ»Ğ¸ ĞµÑ‰Ñ‘ Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½).
2. Ğ’ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:

```bash
railway login
railway init
```

3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ² Railway (Dashboard Ğ¸Ğ»Ğ¸ `railway variables`):
   - `BOT_TOKEN`
   - `SUPABASE_URL`
   - `SUPABASE_KEY`
   - `ADMIN_TELEGRAM_ID`
   - `WEBAPP_URL`

4. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ¸Ğ· ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ° **bot**:

```bash
cd bot
railway up
```

Ğ›Ğ¸Ğ±Ğ¾ ÑƒĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ° Railway ĞºĞ¾Ñ€ĞµĞ½ÑŒ ÑĞ±Ğ¾Ñ€ĞºĞ¸ **bot** Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¹ **Dockerfile** (Ğ² `bot/Dockerfile`):

- **Build**: Dockerfile Ğ² `bot/`.
- **Start**: `python main.py`.

---

## Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾

### Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ¸Ğ· CSV (ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· Google Sheets)

Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ Ğ² CSV (Ğ¤Ğ°Ğ¹Ğ» â†’ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ â†’ CSV):

```bash
# Ğ˜Ğ· ĞºĞ¾Ñ€Ğ½Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
python scripts/import_from_sheets.py path/to/export.csv
```

Ğ’ CSV Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ **Ğ˜Ğ¼Ñ** (Ğ¸Ğ»Ğ¸ `name`) Ğ¸ **Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³** (Ğ¸Ğ»Ğ¸ `rating`). Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ñ `telegram_id = NULL`; Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ±Ğ¾Ñ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾ `/start`, Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ¸Ğ»Ğ¸ Ğ´Ğ¾Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ² Ğ±Ğ¾Ñ‚Ğµ.

ĞŸĞµÑ€ĞµĞ´ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ **`database/migrations/002_allow_null_telegram_id.sql`**.

### Docker (Ğ±Ğ¾Ñ‚)

```bash
cd bot
docker build -t tennis-league-bot .
docker run --env-file .env tennis-league-bot
```

### Ğ ĞµĞ³Ğ»Ğ°Ğ¼ĞµĞ½Ñ‚ Ğ¸ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³

- Ğ¢ÑƒÑ€ = 1 Ğ¼ĞµÑÑÑ†; Ğ² Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ğµ Ğ²ÑĞµ Ğ¸Ğ³Ñ€Ğ°ÑÑ‚ Ğ´Ñ€ÑƒĞ³ Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼.
- ĞœĞ°Ñ‚Ñ‡: Ğ´Ğ¾ 3 Ğ¿Ğ¾Ğ±ĞµĞ´ (Best of 5). ĞÑ‡ĞºĞ¸: Ğ¿Ğ¾Ğ±ĞµĞ´Ğ° 2, Ğ¿Ğ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ 1, Ğ½ĞµÑÑ‹Ğ³Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ 0.
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ: Ñ‚Ğ¾Ğ¿-2 Ğ²Ğ²ĞµÑ€Ñ…, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 2 Ğ²Ğ½Ğ¸Ğ· (ĞµÑĞ»Ğ¸ Ğ² Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ğµ >8 â€” Ğ¿Ğ¾ 3).
- Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼ Ğ¤ĞĞ¢Ğ  (ĞšĞ” Ğ¿Ğ¾ Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ñƒ, ĞšĞ¡ Ğ¿Ğ¾ ÑÑ‡Ñ‘Ñ‚Ñƒ). ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº: Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ 100, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½.

ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ â€” Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ Â«ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°Â» Ğ² Mini App Ğ¸ Ğ² **context_project.md**.

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ‘Ğ”

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     players     â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)         â”‚
                    â”‚ telegram_id UK  â”‚
                    â”‚ name, rating    â”‚
                    â”‚ is_admin        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                   â”‚
         â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    seasons      â”‚  â”‚ division_playersâ”‚  â”‚ rating_history  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚  â”‚ id (PK)         â”‚  â”‚ id (PK)         â”‚
â”‚ year, month UK  â”‚  â”‚ division_id FK  â”‚  â”‚ player_id FK    â”‚
â”‚ name, status    â”‚  â”‚ player_id FK    â”‚  â”‚ match_id FK     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ position        â”‚  â”‚ season_id FK    â”‚
         â”‚            â”‚ total_points    â”‚  â”‚ rating_before   â”‚
         â”‚            â”‚ total_sets_*   â”‚  â”‚ rating_delta    â”‚
         â–¼            â”‚ rating_delta   â”‚  â”‚ rating_after    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   divisions     â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚ id (PK)         â”‚           â”‚
â”‚ season_id FK     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ number, coef    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     matches     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ division_id FK  â”‚
â”‚ player1_id FK   â”‚
â”‚ player2_id FK   â”‚
â”‚ sets_player1/2  â”‚
â”‚ status          â”‚
â”‚ submitted_by FK â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **players** â€” Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ (telegram_id, Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³, Ğ¸Ğ¼Ñ).
- **seasons** â€” Ñ‚ÑƒÑ€Ñ‹ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼ (year, month, status: active/closed).
- **divisions** â€” Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ñ‹ ÑĞµĞ·Ğ¾Ğ½Ğ° (number, coef ĞšĞ”).
- **division_players** â€” ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸ Ğ´Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ğ¾Ğ½Ğ° (position, Ğ¾Ñ‡ĞºĞ¸, ÑĞµÑ‚Ñ‹, rating_delta).
- **matches** â€” Ğ¼Ğ°Ñ‚Ñ‡Ğ¸ (player1/2, ÑÑ‡Ñ‘Ñ‚, status: pending/played/not_played).
- **rating_history** â€” Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ° Ğ·Ğ° Ğ¼Ğ°Ñ‚Ñ‡.
