-- =============================================
-- Тестовые данные: сезон февраль 2026, 2 дивизиона, по 8 игроков
-- =============================================

-- Сезон (февраль 2026)
INSERT INTO seasons (id, year, month, name, status) VALUES
    ('b0000002-0002-0002-0002-000000000001', 2026, 2, 'Февраль 2026', 'active')
ON CONFLICT (year, month) DO NOTHING;

-- Дивизионы: div1 (КД=0.30), div2 (КД=0.27)
INSERT INTO divisions (id, season_id, number, coef) VALUES
    ('c0000003-0003-0003-0003-000000000001', 'b0000002-0002-0002-0002-000000000001', 1, 0.30),
    ('c0000003-0003-0003-0003-000000000002', 'b0000002-0002-0002-0002-000000000001', 2, 0.27)
ON CONFLICT (season_id, number) DO NOTHING;

-- 8 игроков дивизиона 1 (рейтинги 100–200)
INSERT INTO players (id, telegram_id, telegram_username, name, rating, is_admin) VALUES
    ('a0000001-0001-0001-0001-000000000001', 100001, 'div1_1', 'Иван Иванов', 100.00, true),
    ('a0000001-0001-0001-0001-000000000002', 100002, 'div1_2', 'Пётр Петров', 115.00, false),
    ('a0000001-0001-0001-0001-000000000003', 100003, 'div1_3', 'Сидор Сидоров', 130.00, false),
    ('a0000001-0001-0001-0001-000000000004', 100004, 'div1_4', 'Алексей Алексеев', 145.00, false),
    ('a0000001-0001-0001-0001-000000000005', 100005, 'div1_5', 'Михаил Михайлов', 160.00, false),
    ('a0000001-0001-0001-0001-000000000006', 100006, 'div1_6', 'Дмитрий Дмитриев', 175.00, false),
    ('a0000001-0001-0001-0001-000000000007', 100007, 'div1_7', 'Николай Николаев', 190.00, false),
    ('a0000001-0001-0001-0001-000000000008', 100008, 'div1_8', 'Сергей Сергеев', 200.00, false)
ON CONFLICT (telegram_id) DO UPDATE SET name = EXCLUDED.name, rating = EXCLUDED.rating;

-- 8 игроков дивизиона 2 (рейтинги 80–120)
INSERT INTO players (id, telegram_id, telegram_username, name, rating, is_admin) VALUES
    ('a0000001-0001-0001-0001-000000000009', 100009, 'div2_1', 'Андрей Андреев', 80.00, false),
    ('a0000001-0001-0001-0001-00000000000a', 100010, 'div2_2', 'Евгений Евгеньев', 85.00, false),
    ('a0000001-0001-0001-0001-00000000000b', 100011, 'div2_3', 'Олег Олегов', 90.00, false),
    ('a0000001-0001-0001-0001-00000000000c', 100012, 'div2_4', 'Виктор Викторов', 95.00, false),
    ('a0000001-0001-0001-0001-00000000000d', 100013, 'div2_5', 'Павел Павлов', 100.00, false),
    ('a0000001-0001-0001-0001-00000000000e', 100014, 'div2_6', 'Кирилл Кириллов', 105.00, false),
    ('a0000001-0001-0001-0001-00000000000f', 100015, 'div2_7', 'Максим Максимов', 110.00, false),
    ('a0000001-0001-0001-0001-000000000010', 100016, 'div2_8', 'Илья Ильин', 120.00, false)
ON CONFLICT (telegram_id) DO UPDATE SET name = EXCLUDED.name, rating = EXCLUDED.rating;

-- Участники дивизиона 1
INSERT INTO division_players (division_id, player_id, position, total_points, total_sets_won, total_sets_lost) VALUES
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000001', 1, 4, 6, 1),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000002', 2, 2, 3, 4),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000003', 3, 2, 4, 3),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000004', 4, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000005', 5, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000006', 6, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000007', 7, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000008', 8, 0, 0, 0)
ON CONFLICT (division_id, player_id) DO UPDATE SET
    position = EXCLUDED.position,
    total_points = EXCLUDED.total_points,
    total_sets_won = EXCLUDED.total_sets_won,
    total_sets_lost = EXCLUDED.total_sets_lost;

-- Участники дивизиона 2
INSERT INTO division_players (division_id, player_id, position, total_points, total_sets_won, total_sets_lost) VALUES
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-000000000009', 1, 2, 3, 2),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000a', 2, 2, 2, 3),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000b', 3, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000c', 4, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000d', 5, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000e', 6, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-00000000000f', 7, 0, 0, 0),
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-000000000010', 8, 0, 0, 0)
ON CONFLICT (division_id, player_id) DO UPDATE SET
    position = EXCLUDED.position,
    total_points = EXCLUDED.total_points,
    total_sets_won = EXCLUDED.total_sets_won,
    total_sets_lost = EXCLUDED.total_sets_lost;

-- Дивизион 1: сыгранные матчи (p1–p2 3:1, p1–p3 3:0, p2–p3 2:3)
INSERT INTO matches (division_id, player1_id, player2_id, sets_player1, sets_player2, status, submitted_by, played_at) VALUES
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000001', 'a0000001-0001-0001-0001-000000000002', 3, 1, 'played', 'a0000001-0001-0001-0001-000000000001', NOW() - INTERVAL '5 days'),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000001', 'a0000001-0001-0001-0001-000000000003', 3, 0, 'played', 'a0000001-0001-0001-0001-000000000001', NOW() - INTERVAL '4 days'),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000002', 'a0000001-0001-0001-0001-000000000003', 2, 3, 'played', 'a0000001-0001-0001-0001-000000000003', NOW() - INTERVAL '3 days')
ON CONFLICT (division_id, player1_id, player2_id) DO NOTHING;

-- Дивизион 1: несыгранные (pending) — пары p1–p4, p2–p4, p3–p4
INSERT INTO matches (division_id, player1_id, player2_id, sets_player1, sets_player2, status) VALUES
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000001', 'a0000001-0001-0001-0001-000000000004', NULL, NULL, 'pending'),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000002', 'a0000001-0001-0001-0001-000000000004', NULL, NULL, 'pending'),
    ('c0000003-0003-0003-0003-000000000001', 'a0000001-0001-0001-0001-000000000003', 'a0000001-0001-0001-0001-000000000004', NULL, NULL, 'pending')
ON CONFLICT (division_id, player1_id, player2_id) DO NOTHING;

-- Дивизион 2: один сыгранный (p9–p10 3:2) и один pending
INSERT INTO matches (division_id, player1_id, player2_id, sets_player1, sets_player2, status, submitted_by, played_at) VALUES
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-000000000009', 'a0000001-0001-0001-0001-00000000000a', 3, 2, 'played', 'a0000001-0001-0001-0001-000000000009', NOW() - INTERVAL '2 days')
ON CONFLICT (division_id, player1_id, player2_id) DO NOTHING;

INSERT INTO matches (division_id, player1_id, player2_id, sets_player1, sets_player2, status) VALUES
    ('c0000003-0003-0003-0003-000000000002', 'a0000001-0001-0001-0001-000000000009', 'a0000001-0001-0001-0001-00000000000b', NULL, NULL, 'pending')
ON CONFLICT (division_id, player1_id, player2_id) DO NOTHING;
